const moment = require("moment-timezone");

module.exports.config = {
Â  name: "autotimer",
Â  version: "3.3",
Â  role: 0,
Â  author: "M.MUNTASIR",
Â  description: "â° à¦ªà§à¦°à¦¤à¦¿ à¦˜à¦£à§à¦Ÿà¦¾à§Ÿ à¦¸à¦¬ à¦—à§à¦°à§à¦ªà§‡ à¦¹à§‡à¦¡à¦¾à¦°à¦¸à¦¹ à¦…à¦Ÿà§‹ à¦®à§‡à¦¸à§‡à¦œ à¦ªà¦¾à¦ à¦¾à¦¬à§‡ (24-hour system)",
Â  category: "AutoTime",
Â  countDown: 3,
};

module.exports.onLoad = async function ({ api }) {

Â  // â³ à¦¬à¦Ÿ à¦²à§‹à¦¡ à¦¹à¦¤à§‡ à§« à¦¸à§‡à¦•à§‡à¦¨à§à¦¡ à¦…à¦ªà§‡à¦•à§à¦·à¦¾ à¦•à¦°à¦¬à§‡
Â  setTimeout(async () => {

Â Â Â  const timerData = {
Â Â Â Â Â  "12:00:00 AM": "ðŸŒ™ à¦®à¦§à§à¦¯à¦°à¦¾à¦¤! à¦˜à§à¦®à¦¾à¦“, à¦•à¦¾à¦²à¦•à§‡à¦° à¦¦à¦¿à¦¨ à¦¨à¦¤à§à¦¨ à¦†à¦¶à¦¾à§Ÿ à¦¶à§à¦°à§ à¦•à¦°à§‹ ðŸ˜´",
Â Â Â Â Â  "01:00:00 AM": "ðŸŒŒ à¦°à¦¾à¦¤ à¦—à¦­à§€à¦°! à¦à¦•à¦Ÿà§ à¦¬à¦¿à¦¶à§à¦°à¦¾à¦® à¦¨à¦¾à¦“ ðŸ’¤",
Â Â Â Â Â  "02:00:00 AM": "ðŸŒ  à¦à¦–à¦¨à§‹ à¦œà§‡à¦—à§‡ à¦†à¦›à§‹? à¦šà§‹à¦–à¦Ÿà¦¾ à¦¬à¦¨à§à¦§ à¦•à¦°à§‹ ðŸ˜ª",
Â Â Â Â Â  "03:00:00 AM": "ðŸŒƒ à¦°à¦¾à¦¤ à¦ªà§à¦°à¦¾à¦¯à¦¼ à¦¶à§‡à¦·, à¦˜à§à¦®à¦¾à¦“ à¦¬à¦¨à§à¦§à§ ðŸ˜´",
Â Â Â Â Â  "04:00:00 AM": "ðŸŒ„ à¦­à§‹à¦° à¦¹à¦¤à§‡ à¦¯à¦¾à¦šà§à¦›à§‡, à¦¨à¦¤à§à¦¨ à¦†à¦²à§‹ à¦†à¦¸à¦›à§‡ ðŸŒ¤ï¸",
Â Â Â Â Â  "05:00:00 AM": "ðŸŒ… à¦¶à§à¦­ à¦¸à¦•à¦¾à¦²! à¦¹à¦¾à¦¸à¦¿à¦®à§à¦–à§‡ à¦¦à¦¿à¦¨ à¦¶à§à¦°à§ à¦•à¦°à§‹ â˜€ï¸",
Â Â Â Â Â  "06:00:00 AM": "ðŸŒž à¦¸à¦•à¦¾à¦² à¦¬à§‡à¦²à¦¾! à¦à¦• à¦•à¦¾à¦ª à¦šà¦¾ à¦•à¦«à¦¿ à¦•à§‡à¦®à¦¨ à¦¹à¦¬à§‡ â˜•",
Â Â Â Â Â  "07:00:00 AM": "ðŸž à¦¨à¦¾à¦¸à§à¦¤à¦¾à¦° à¦¸à¦®à¦¯à¦¼! à¦¶à¦°à§€à¦° à¦­à¦¾à¦²à§‹ à¦°à¦¾à¦–à§‹ ðŸ’ª",
Â Â Â Â Â  "08:00:00 AM": "ðŸŒ¤ï¸ à¦¨à¦¤à§à¦¨ à¦¦à¦¿à¦¨à§‡à¦° à¦¬à§à¦¯à¦¸à§à¦¤à¦¤à¦¾ à¦¶à§à¦°à§! à¦¸à¦«à¦² à¦¹à¦“ âœ¨",
Â Â Â Â Â  "09:00:00 AM": "ðŸ•˜ à¦¶à§à¦­ à¦¸à¦•à¦¾à¦²! à¦•à¦¾à¦œà§‡ à¦®à¦¨ à¦¦à¦¾à¦“ ðŸ’¼",
Â Â Â Â Â  "10:00:00 AM": "ðŸŒž à¦¸à¦•à¦¾à¦²à§‡à¦° à¦¸à§‚à¦°à§à¦¯ à¦¤à§‹à¦®à¦¾à¦° à¦œà¦¨à§à¦¯ à¦¶à¦•à§à¦¤à¦¿ à¦†à¦¨à§à¦• â˜€ï¸",
Â Â Â Â Â  "11:00:00 AM": "ðŸŒ» à¦¸à¦•à¦¾à¦² à¦¶à§‡à¦·! à¦à¦•à¦Ÿà§ à¦¬à¦¿à¦¶à§à¦°à¦¾à¦® à¦¨à¦¾à¦“ ðŸ˜Œ",
Â Â Â Â Â  "12:00:00 PM": "ðŸ› à¦¦à§à¦ªà§à¦°à§‡à¦° à¦–à¦¾à¦¬à¦¾à¦° à¦¸à¦®à§Ÿ! à¦–à§‡à§Ÿà§‡ à¦¨à¦¾à¦“ ðŸ˜‹",
Â Â Â Â Â  "01:00:00 PM": "ðŸ˜´ à¦à¦•à¦Ÿà§ à¦¬à¦¿à¦¶à§à¦°à¦¾à¦® à¦¨à¦¾à¦“, à¦¦à§à¦ªà§à¦°à§‡à¦° à¦˜à§à¦® à¦­à¦¾à¦²à§‹ à¦œà¦¿à¦¨à¦¿à¦¸ ðŸ’¤",
Â Â Â Â Â  "02:00:00 PM": "ðŸŒ¤ï¸ à¦¬à¦¿à¦•à§‡à¦² à¦†à¦¸à¦›à§‡! à¦®à¦¨ à¦­à¦¾à¦²à§‹ à¦°à¦¾à¦–à§‹ â˜€ï¸",
Â Â Â Â Â  "03:00:00 PM": "â˜€ï¸ à¦¬à¦¿à¦•à§‡à¦²à§‡à¦° à¦°à§‹à¦¦à§‡ à¦¹à¦¾à¦¸à¦¿ à¦›à§œà¦¾à¦“ ðŸ’›",
Â Â Â Â Â  "04:00:00 PM": "ðŸŒ‡ à¦¬à¦¿à¦•à§‡à¦² à¦¶à§‡à¦·! à¦à¦•à¦Ÿà§ à¦¶à¦¾à¦¨à§à¦¤à¦¿ à¦¨à¦¾à¦“ â˜•",
Â Â Â Â Â  "05:00:00 PM": "ðŸŒ† à¦¸à¦¨à§à¦§à§à¦¯à¦¾ à¦¨à¦¾à¦®à¦›à§‡! à¦¦à¦¿à¦¨à¦Ÿà¦¾ à¦•à§‡à¦®à¦¨ à¦•à¦¾à¦Ÿà¦²à§‹? ðŸ˜Š",
Â Â Â Â Â  "06:00:00 PM": "ðŸŒ‡ à¦¶à§à¦­ à¦¸à¦¨à§à¦§à§à¦¯à¦¾! à¦à¦•à¦Ÿà§ à¦¸à¦®à§Ÿ à¦¨à¦¿à¦œà§‡à¦° à¦œà¦¨à§à¦¯ à¦°à¦¾à¦–à§‹ âœ¨",
Â Â Â Â Â  "07:00:00 PM": "ðŸŒƒ à¦°à¦¾à¦¤ à¦¨à¦¾à¦®à¦›à§‡, à¦®à¦¨à¦Ÿà¦¾ à¦¶à¦¾à¦¨à§à¦¤ à¦•à¦°à§‹ ðŸ’«",
Â Â Â Â Â  "08:00:00 PM": "ðŸ½ï¸ à¦°à¦¾à¦¤à§‡à¦° à¦–à¦¾à¦¬à¦¾à¦° à¦¸à¦®à§Ÿ ðŸ˜‹",
Â Â Â Â Â  "09:00:00 PM": "ðŸŒ™ à¦°à¦¾à¦¤ à¦—à¦­à§€à¦° à¦¹à¦šà§à¦›à§‡! à¦¬à¦¿à¦¶à§à¦°à¦¾à¦® à¦¨à¦¾à¦“ ðŸ›Œ",
Â Â Â Â Â  "10:00:00 PM": "ðŸ˜´ à¦¶à§à¦­ à¦°à¦¾à¦¤à§à¦°à¦¿! à¦®à¦¿à¦·à§à¦Ÿà¦¿ à¦˜à§à¦®à§‡ à¦šà§‹à¦– à¦¬à§à¦œà§‡ à¦«à§‡à¦²à§‹ ðŸŒ ",
Â Â Â Â Â  "11:00:00 PM": "ðŸŒŒ à¦¦à¦¿à¦¨ à¦¶à§‡à¦·! à¦˜à§à¦®à¦¾à¦¨à§‹à¦° à¦ªà§à¦°à¦¸à§à¦¤à§à¦¤à¦¿ à¦¨à¦¾à¦“ ðŸ’¤"
Â Â Â  };

Â Â Â  console.log("âœ… AutoTimer System Loaded â€” à¦ªà§à¦°à¦¤à¦¿ à¦˜à¦£à§à¦Ÿà¦¾à§Ÿ à¦¸à¦®à§Ÿ à¦šà§‡à¦• à¦¶à§à¦°à§ à¦¹à§Ÿà§‡à¦›à§‡...");

Â Â Â  const checkTimeAndSend = async () => {
Â Â Â Â Â  const now = moment().tz("Asia/Dhaka").format("hh:mm:ss A");
Â Â Â Â Â  const messageText = timerData[now];

Â Â Â Â Â  if (messageText) {
Â Â Â Â Â Â Â  const timeFormatted = moment().tz("Asia/Dhaka").format("hh:mm A");
Â Â Â Â Â Â Â  const todayDate = moment().tz("Asia/Dhaka").format("DD-MM-YYYY");
Â Â Â Â Â Â Â  const hour = parseInt(moment().tz("Asia/Dhaka").format("HH"));
Â Â Â Â Â Â Â  let period = "";

Â Â Â Â Â Â Â  if (hour >= 4 && hour < 12) period = "à¦¸à¦•à¦¾à¦²";
Â Â Â Â Â Â Â  else if (hour >= 12 && hour < 17) period = "à¦¦à§à¦ªà§à¦°";
Â Â Â Â Â Â Â  else if (hour >= 17 && hour < 20) period = "à¦¬à¦¿à¦•à§‡à¦²";
Â Â Â Â Â Â Â  else if (hour >= 20 && hour < 24) period = "à¦°à¦¾à¦¤";
Â Â Â Â Â Â Â  else period = "à¦­à§‹à¦°";

Â Â Â Â Â Â Â  const finalMessage =
`â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ðŸ•’ à¦à¦–à¦¨ à¦¸à¦®à§Ÿ: ${period} ${timeFormatted}Â  
${messageText}
ðŸ“… DATE : ${todayDate}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”`;

Â Â Â Â Â Â Â  try {
Â Â Â Â Â Â Â Â Â  const allThreads = await api.getThreadList(100, null, ["INBOX"]);
Â Â Â Â Â Â Â Â Â  const groupThreads = allThreads.filter(t => t.isGroup);

Â Â Â Â Â Â Â Â Â  console.log(`ðŸ•’ ${now} â†’ ${groupThreads.length} à¦—à§à¦°à§à¦ªà§‡ à¦ªà¦¾à¦ à¦¾à¦¨à§‹ à¦¹à¦šà§à¦›à§‡...`);

Â Â Â Â Â Â Â Â Â  for (const thread of groupThreads) {
Â Â Â Â Â Â Â Â Â Â Â  await api.sendMessage(finalMessage, thread.threadID);
Â Â Â Â Â Â Â Â Â  }

Â Â Â Â Â Â Â Â Â  console.log("âœ… à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦¸à¦¬ à¦—à§à¦°à§à¦ªà§‡ à¦¬à¦¾à¦°à§à¦¤à¦¾ à¦ªà¦¾à¦ à¦¾à¦¨à§‹ à¦¹à§Ÿà§‡à¦›à§‡!");
Â Â Â Â Â Â Â  } catch (err) {
Â Â Â Â Â Â Â Â Â  console.error("âŒ AutoTimer Error:", err);
Â Â Â Â Â Â Â  }
Â Â Â Â Â  }
Â Â Â  };

Â Â Â  setInterval(checkTimeAndSend, 1000);
Â  }, 5000);
};

module.exports.onStart = () => {};
